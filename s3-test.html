<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>HTML 5 Boilerplate</title>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1083.0.min.js"></script>
  </head>
  <body>
    
    <script>
      const Bucket = "static-files";
      const accessKeyId = "ju3yu5nhiuhc33fcvqgkwojujpja";
      const secretAccessKey = "jzeem3sn6vpurpvupdlx255sldvayxfdog6x7htk5hveuaw2ptwi2";
      const endpoint = "https://gateway.us1.storjshare.io";
      
      var bucketParams = {
        Bucket: 'static-files',
      };

      const s3 = new AWS.S3({
        accessKeyId,
        secretAccessKey,
        endpoint,
        s3ForcePathStyle: true,
        signatureVersion: "v4",
        connectTimeout: 0,
        httpOptions: { timeout: 0 }
      });
      
      (async () => {

      const { Buckets } = await s3.listBuckets({}).promise();
      console.log(Buckets);
       

      })();
      
      async function getReports(objects = []) {
      const response = await s3.listObjectsV2(bucketParams).promise();

      response.Contents.forEach(obj => objects.push(obj));
        
     

      if (response.NextContinuationToken) {
        bucketParams.ContinuationToken = response.NextContinuationToken;
        await getReports(bucketParams, objects);
      }
      console.log("objects ",objects)
      return objects;
      }
      getReports();
      
    
      
    
      
    </script>

  </body>
</html>
