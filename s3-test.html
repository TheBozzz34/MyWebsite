<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>title</title>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1083.0.min.js"></script>
    <script src="/scripts/objectImage.js"</script>
  </head>
  <body>
    
    <script>
    
    /*
      const Bucket = "static-files";
      const accessKeyId = "ju3yu5nhiuhc33fcvqgkwojujpja";
      const secretAccessKey = "jzeem3sn6vpurpvupdlx255sldvayxfdog6x7htk5hveuaw2ptwi2";
      const endpoint = "https://gateway.us1.storjshare.io";
      
      var bucketParams = {
        Bucket: 'static-files',
      };

      const s3 = new AWS.S3({
        accessKeyId,
        secretAccessKey,
        endpoint,
        s3ForcePathStyle: true,
        signatureVersion: "v4",
        connectTimeout: 0,
        httpOptions: { timeout: 0 }
      });
      
      (async () => {

      const { Buckets } = await s3.listBuckets({}).promise();
      console.log(Buckets);
       

      })();
      
      async function getReports(objects = []) {
      const response = await s3.listObjectsV2(bucketParams).promise();

      response.Contents.forEach(obj => objects.push(obj));
        
     

      if (response.NextContinuationToken) {
        bucketParams.ContinuationToken = response.NextContinuationToken;
        await getReports(bucketParams, objects);
      }
      console.log("objects ",objects)
      return objects;
      }
      getReports();
      
      async function getImage(){
        const data =  s3.getObject(
          {
              Bucket: 'static-files',
              Key: 'moika-cropped.gif'
            }
          
        ).promise();
        return data;
        
      }
      function encode(data){
        let buf = Buffer.from(data);
        let base64 = buf.toString('base64');
        //let base64 = data.toString('base64');
        return base64
        
    }
    var div = document.createElement('DIV');
    getImage()
    .then((img)=>{
      let image="<img src='data:image/jpeg;base64," + encode(img.Body) + "'" + "/>";
      let startHTML="<html><body></body>";
      let endHTML="</body></html>";
      let html=startHTML + image + endHTML;
      div.innerHTML = html
      div.firstChild

    }).catch((e)=>{
        console.log(e)
    })
    
    
    */
      
    
      
    
      
    </script>

  </body>
</html>
